<div class="box right-sidebar">
<%= form_for @entry, class: "form-horizontal", role: "form" do |f| %>
  <% if @entry.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@entry.errors.count, "error") %> prohibited this entry from being saved:</h2>

      <ul>
      <% @entry.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <div class="input-group">
      <div class="radio-line">
        <%= f.radio_button :positive, "1", checked: true, class: "iCheck", data: {skin: "line", color: "green"} %>
        <%= f.label :positive, "Receita" %>
        <%= f.radio_button :positive, "0", class: "iCheck", data: {skin: "line", color: "red"} %>
        <%= f.label :positive, "Despesa" %>
      </div>
    </div><!-- /input-group -->
  </div><!-- /form-group -->

  <div class="form-group">
    <%= f.label :title %><br>
    <%= f.text_field :title, class: "form-control" %>
  </div>

  <%= f.fields_for :entry_details do |ed| %>
    <div class="form-group">
      <%= ed.label :amount %><br>
      <%= ed.text_field :amount, class: "form-control" %>
    </div>
    <div class="form-group">
        <div class="input-group">
          <%= ed.check_box :paid, class: "iCheck", data: {skin: "line", color: "blue"} %>
          <%= ed.label :paid %>
        </div><!-- /input-group -->
    </div>
    <div class="form-group">
        <div class='input-group date' id='datetimepicker-entry'>
          <%= text_field_tag :entry_date, '', class: "form-control", data: {format: "DD/MM/YYYY"} %>
          <span class="input-group-addon">
            <span class="icon ion-ios7-calendar-outline"></span>
          </span>
        </div>
    </div>
    <!--<div class="col-xs-2">-->
        <!--<div class="form-group">-->
          <!--<%= ed.label :day %>-->
          <!--<%= ed.collection_select :month, 1..31, :to_s, :to_s, {selected: Date.today.strftime("%m")}, {class: "form-control"} %>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="col-sm-6">-->
        <!--<div class="form-group">-->
          <!--<%= ed.label :month %>-->
          <!--<%= ed.collection_select :month, months, :first, :last, {selected: Date.today.strftime("%m")}, {class: "form-control"} %>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="col-sm-4">-->
        <!--<div class="form-group">-->
          <!--<%= ed.label :year %>-->
          <!--<%= ed.number_field :year, class: "form-control" %>-->
        <!--</div>-->
    <!--</div>-->
  <% end %>

  <div class="form-group">
    <%= f.label :category, class: "control-label" %>
    <%= f.collection_select :category_id, Category.order(:name), :id, :name, {prompt: true}, {class: "form-control"} %>
  </div>

  <div class="form-group">
    <%= f.label :tags %><br>
    <%= f.collection_select :tag_ids, Tag.order(:name), :id, :name, {}, {multiple: true, class: "form-control"} %>
  </div>

  <div class="form-group">
    <%= f.label :description %><br>
    <%= f.text_area :description, class: "form-control" %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
</div>

<%= javascript_include_tag 'jquery-icheck/jquery.icheck.min' %>

<script type="text/javascript">

    $(function() {
        'use strict';

        // checkbox and radio with iCheck
        // Initialize all components iCheck
        $('.iCheck').each(function(){
            // var each element .iCheck
            var $this = $(this),
                    skin = $this.attr('data-skin'),
                    color = $this.attr('data-color'),
                    checkbox, radio, insert = '';

            /**
             * default usage skin
             *
             * Skins options:
             * @data-skin minimalis
             * @data-skin square
             * @data-skin flat
             * @data-skin line
             * @data-skin polaris
             * @data-skin futurico
             */
            if (skin === undefined) {
                checkbox = 'icheckbox_minimal';
                radio = 'iradio_minimal';
            }
            else{
                checkbox = 'icheckbox_' + skin;
                radio = 'iradio_' + skin;
            }

            /**
             * default usage color
             *
             * Available colors:
             * @data-color black
             * @data-color red
             * @data-color green
             * @data-color blue
             * @data-color aero
             * @data-color grey
             * @data-color orange
             * @data-color yellow
             * @data-color pink
             * @data-color purple
             */
            if (color !== undefined) {
                checkbox = checkbox + '-' + color;
                radio = radio + '-' + color;
            }

            // handle iCheck skin 'line'
            if (skin == 'line') {
                var label = $this.next(),
                        label_text = label.text();

                insert = '<div class="icheck_line-icon"></div>' + label_text;
                label.remove();
            }

            // initialize
            $this.iCheck({
                checkboxClass: checkbox,
                radioClass: radio,
                insert: insert,
                increaseArea: '20%' // optional
            });
        });

        // bootstrap3-datetimepicker
//        $('#datetimepicker-entry').datetimepicker({
//            icons : {
//                time: 'icon ion-ios7-clock-outline',
//                date: 'icon ion-ios7-calendar-outline',
//                up:   'icon ion-ios7-arrow-up',
//                down: 'icon ion-ios7-arrow-down'
//            }
//        });
    });

</script>